(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{332:function(e,t,n){"use strict";n(45);var o,r,c=n(6);t.a={data:function(){return{publicKey:"-----BEGIN PUBLIC KEY-----\nMFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAIGs2dvgRPJl/zMLAUeZgLP2ouCvuXcg\n65LI3KsUDl40UwATyxaX2ZxgytcrGFk8KRwcRiexEhbRlytedqbKVsMCAwEAAQ==\n-----END PUBLIC KEY-----",privateKey:"-----BEGIN RSA PRIVATE KEY-----\nMIIBOQIBAAJBAIGs2dvgRPJl/zMLAUeZgLP2ouCvuXcg65LI3KsUDl40UwATyxaX\n2ZxgytcrGFk8KRwcRiexEhbRlytedqbKVsMCAwEAAQJAdg98Dc5il1o7fSpQ0PI1\nliM/aVczgP1M3MfY+Dz7U9H5zzFHX3zasyFTu505i4Ia75DEU3Ik5MNAJsajC7Li\nKQIhANTmbAIJK0H5VPqYMvNKIPKcFcNghQzM5O6WCBx/Rff3AiEAm+1JhWfMQIXo\nzcH7yn4QWg6EjpfUK/Es3sWgp8seHJUCIACtz3BeOR4XvnaiH595AAvmBYe++g2l\nZaGBJvt4SG/XAiA2h4IppEYa3nmu00MB6po/VEppL5GkmGAvu/9WDsOGDQIgJdXi\n+Bf8g9tQUSeiK6kGqKeZfbA49Qot3NWxA/VxGXI=\n-----END RSA PRIVATE KEY-----",jsencrypt:function(){return n.e(16).then(n.t.bind(null,333,7))}}},methods:{_getPublicKey:(r=Object(c.a)(regeneratorRuntime.mark((function e(t){var n,o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.jsencrypt();case 2:return n=e.sent,o=n.JSEncrypt,(r=new o).setPublicKey(this.publicKey),e.abrupt("return",r.encrypt(t));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)}),_parsingKey:(o=Object(c.a)(regeneratorRuntime.mark((function e(t){var n,o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.jsencrypt();case 2:return n=e.sent,o=n.JSEncrypt,(r=new o).setPrivateKey(this.privateKey),e.abrupt("return",r.decrypt(t));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})}}},339:function(e,t,n){},340:function(e,t,n){},343:function(e,t,n){"use strict";n(45);var o,r=n(6),c=n(133),l={mixins:[n(134).a],props:{identity:String,email:String,type:String,mobile:String,isValidate:Boolean},data:function(){return{isSend:!1,countDown:0,timer:null,url:null,msg:null,sendData:null}},methods:{_getCode:(o=Object(r.a)(regeneratorRuntime.mark((function e(){var t,code,data,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("email"==this.type?(this.msg="请先输入邮箱并确认身份",this.url=c.d,this.sendData={email:this.email,identity:this.identity}):(this.msg="请输入正确的手机号码",this.url=c.b,this.sendData={mobile:this.mobile,identity:this.identity}),this.isValidate&&this.identity){e.next=4;break}return this.alert(this.msg),e.abrupt("return");case 4:return this.isSend=!0,this.countDown=5,this.timer=setInterval((function(){if(n.countDown<1)return clearInterval(n.timer),void(n.isSend=!1);n.countDown--}),1e3),e.next=9,this.url(this.sendData);case 9:t=e.sent,code=t.code,data=t.data,t.message,0===code?this.alert(data.msg,1==this.identity?"success":"warning"):this.alert("频率过快,绑定手机失败","warning");case 14:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})}},m=n(2),component=Object(m.a)(l,(function(){var e=this.$createElement;return(this._self._c||e)("el-button",{attrs:{type:"primary",loading:this.isSend},on:{click:this._getCode}},[this._v("\n  "+this._s(this.isSend?this.countDown+" 秒后从新获取":"发送"+("email"==this.type?"邮箱":"手机")+"验证码")+"\n")])}),[],!1,null,"1ca13711",null);t.a=component.exports},349:function(e,t,n){"use strict";var o=n(339);n.n(o).a},350:function(e,t,n){"use strict";var o=n(340);n.n(o).a},353:function(e,t,n){"use strict";n.r(t);n(45);var o,r=n(6),c=(n(20),n(134)),l=n(332),m=n(133),d=n(43),f=function(e){var data=localStorage[e]&&JSON.parse(localStorage[e]);return data||!1},v={props:{activeNames:String,isDisabled:Boolean,index:String}},h=(n(349),n(2)),w=Object(h.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"btn-group mt_20"},[n("el-button",{attrs:{size:"small",type:"primary",disabled:e.activeNames==e.index&&e.isDisabled},on:{click:function(t){return e.$emit("uodateUser")}}},[e._v("确定")]),e._v(" "),n("el-button",{attrs:{size:"small"},on:{click:function(t){return e.$emit("changeActive")}}},[e._v("取消")])],1)}),[],!1,null,"36c8d4ad",null).exports,_=n(343),N={mixins:[c.a,l.a],components:{btnGroup:w,getCode:_.a},mounted:function(){var e=this;this.$nextTick((function(){e.useNameLogin=f("user").hasOwnProperty("accountName")}))},data:function(){return{activeNames:"0",isDisabled:!0,useNameLogin:!1,emailValidator:!1,isValidateMobile:!1,temporaryPassword:null,form:JSON.parse(JSON.stringify(this.$store.state.user.UserInfo)),isLinkHome:!0,isShowPassword:!1}},methods:{_updateUser:(o=Object(r.a)(regeneratorRuntime.mark((function e(t,data){var n,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.every((function(e){return"success"===o.$refs[e].validateState}))){e.next=29;break}if(!data.password){e.next=12;break}return e.next=5,this._getPublicKey(data.password);case 5:return data.password=e.sent,e.next=8,this._getPublicKey(data.newPassword);case 8:this.temporaryPassword=data.newPassword=e.sent,this.form.oldPassword="",this.form.newPassword="",this.form.checkPassword="";case 12:return(data.accountName||this.form.email)&&this.isSaveUserName(),e.next=15,Object(m.k)(data);case 15:if(n=e.sent,console.log(n),1!=n.code){e.next=22;break}return 401===n.status?this.newLogin():this.alert(n.message),e.abrupt("return");case 22:sessionStorage.token=n.data.token,this.$store.commit("user/saveUserInfo",n.data.user),this.alert(n.data.msg,"success");case 25:this.activeNames="0",this.isDisabled=!0,e.next=30;break;case 29:this.alert("请检查表单后在进行数据提交");case 30:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)}),isSaveUserName:function(){var e,t,n={accountName:this.form.accountName,email:this.form.email,password:this.temporaryPassword||this.password},o=f("user");o&&o.hasOwnProperty("accountName")&&!this.useNameLogin&&delete n.accountName,e="user",t=n,"object"==Object(d.a)(t)?localStorage[e]=JSON.stringify(t):localStorage[e]=t}},computed:{showErrorMessage:function(){return Boolean(this.activeNames)}}},y=(n(350),Object(h.a)(N,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"account-container w_840"},[n("el-form",{attrs:{"label-position":"top","label-width":"80px",model:e.form,"show-message":e.showErrorMessage,rules:e.rules}},[n("div",{staticClass:"title-container ft_24 c_6 ft_b mt_30 "},[e._v("账户与安全")]),e._v(" "),n("el-collapse",{attrs:{accordion:!0},on:{change:function(t){e.isDisabled=!0}},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[n("el-collapse-item",{staticClass:"mt_30",attrs:{name:"1"}},[n("template",{slot:"title"},[n("el-form-item",{ref:"accountName",staticClass:"w_100p",attrs:{prop:"accountName",label:"用户名"}},[n("el-input",{class:{on:"1"==e.activeNames},attrs:{"suffix-icon":"icon iconfont icon-write_fill",placeholder:"请输入用户名"},on:{input:function(t){e.isDisabled=!1}},model:{value:e.form.accountName,callback:function(t){e.$set(e.form,"accountName",t)},expression:"form.accountName"}})],1)],1),e._v(" "),n("div",{staticClass:"mt_25"},[n("div",{staticClass:"operate-container"},[n("el-switch",{attrs:{"active-text":"使用用户名作为登录凭证"},model:{value:e.useNameLogin,callback:function(t){e.useNameLogin=t},expression:"useNameLogin"}})],1),e._v(" "),n("btn-group",{attrs:{activeNames:e.activeNames,isDisabled:e.isDisabled,index:"1"},on:{uodateUser:function(t){return e._updateUser(["accountName"],{accountName:e.form.accountName})},changeActive:function(t){e.activeNames="0"}}})],1)],2),e._v(" "),n("el-collapse-item",{staticClass:"mt_30",attrs:{name:"2"}},[n("template",{slot:"title"},[n("el-form-item",{ref:"oldPassword",staticClass:"w_100p",attrs:{prop:"oldPassword",label:"密码"}},[n("el-input",{class:{on:"2"==e.activeNames},attrs:{"suffix-icon":"icon iconfont icon-write_fill",placeholder:"修改密码前需要输入当前密码",type:"password"},on:{input:function(t){e.isDisabled=!1}},model:{value:e.form.oldPassword,callback:function(t){e.$set(e.form,"oldPassword",t)},expression:"form.oldPassword"}})],1)],1),e._v(" "),n("div",{staticClass:"mt_25 "},[n("div",{staticClass:"operate-container"},[n("el-form-item",{ref:"newPassword",attrs:{prop:"newPassword"}},[n("el-input",{attrs:{type:e.isShowPassword?"text":"password",placeholder:"新密码"},on:{input:function(t){e.isDisabled=!1}},model:{value:e.form.newPassword,callback:function(t){e.$set(e.form,"newPassword",t)},expression:"form.newPassword"}},[n("span",{staticClass:"icon iconfont icon-eye ft_18 c_r",attrs:{slot:"suffix"},on:{click:function(t){e.isShowPassword=!e.isShowPassword}},slot:"suffix"})])],1),e._v(" "),n("el-form-item",{ref:"checkPassword",attrs:{prop:"checkPassword"}},[n("el-input",{attrs:{type:e.isShowPassword?"text":"password",placeholder:"确认新密码"},on:{input:function(t){e.isDisabled=!1}},model:{value:e.form.checkPassword,callback:function(t){e.$set(e.form,"checkPassword",t)},expression:"form.checkPassword"}},[n("span",{staticClass:"icon iconfont icon-eye ft_18 c_r",attrs:{slot:"suffix"},on:{click:function(t){e.isShowPassword=!e.isShowPassword}},slot:"suffix"})])],1)],1),e._v(" "),n("div",{staticClass:"flex  j_s "},[n("btn-group",{attrs:{activeNames:e.activeNames,isDisabled:e.isDisabled,index:"2"},on:{uodateUser:function(t){return e._updateUser(["oldPassword","newPassword","checkPassword"],{password:e.form.oldPassword,newPassword:e.form.newPassword})},changeActive:function(t){e.activeNames="0"}}}),e._v(" "),n("nuxt-link",{staticClass:"f_x_e ml_20 c_tc",attrs:{to:"/user/resetpassword"}},[e._v("忘记密码")])],1)])],2),e._v(" "),n("el-collapse-item",{staticClass:"mt_30",attrs:{name:"3"}},[n("template",{slot:"title"},[n("el-form-item",{ref:"nickName",staticClass:"w_100p",attrs:{label:"昵称",prop:"nickName"}},[n("el-input",{class:{on:"3"==e.activeNames},attrs:{"suffix-icon":"icon iconfont icon-write_fill",placeholder:"请输入用户昵称"},on:{input:function(t){e.isDisabled=!1}},model:{value:e.form.nickName,callback:function(t){e.$set(e.form,"nickName",t)},expression:"form.nickName"}})],1)],1),e._v(" "),n("btn-group",{staticClass:"mt_30",attrs:{activeNames:e.activeNames,isDisabled:e.isDisabled,index:"3"},on:{uodateUser:function(t){return e._updateUser(["nickName"],{nickName:e.form.nickName})},changeActive:function(t){e.activeNames="0"}}})],2),e._v(" "),n("el-collapse-item",{staticClass:"mt_30",attrs:{name:"4"}},[n("template",{slot:"title"},[n("el-form-item",{ref:"email",staticClass:"w_100p",attrs:{label:"绑定邮箱",prop:"email"}},[n("el-input",{class:{on:"4"==e.activeNames},attrs:{"suffix-icon":"icon iconfont icon-write_fill",placeholder:"请输入需要修改的邮箱"},on:{input:function(t){e.isDisabled=!1}},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),e._v(" "),n("div",{staticClass:"mt_25 "},[n("div",{staticClass:"operate-container"},[n("el-form-item",{attrs:{prop:"code"}},[n("el-input",{attrs:{placeholder:"请输入获取到的验证码"},on:{input:function(t){e.isDisabled=!1}},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}},[n("template",{slot:"append"},[n("get-code",{attrs:{isValidate:e.emailValidator,type:"email",identity:e.form.identity,email:e.form.email}})],1)],2)],1)],1),e._v(" "),n("btn-group",{staticClass:"mt_30",attrs:{activeNames:e.activeNames,isDisabled:e.isDisabled,index:"4"},on:{uodateUser:function(t){return e._updateUser(["email"],{email:e.form.email})},changeActive:function(t){e.activeNames="0"}}})],1)],2),e._v(" "),n("el-collapse-item",{staticClass:"mt_30",attrs:{name:"5"}},[n("template",{slot:"title"},[n("el-form-item",{ref:"mobile",staticClass:"w_100p",attrs:{label:"手机号码",prop:"mobile"}},[n("el-input",{class:{on:"5"==e.activeNames},attrs:{"suffix-icon":"icon iconfont icon-write_fill",placeholder:"请输入手机号码"},on:{input:function(t){e.isDisabled=!1}},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1)],1),e._v(" "),n("div",{staticClass:"mt_30 "},[n("div",{staticClass:"operate-container"},[n("el-form-item",{attrs:{prop:"mobileCode"}},[n("el-input",{attrs:{placeholder:"请输入获取到的验证码"},on:{input:function(t){e.isDisabled=!1}},model:{value:e.form.mobileCode,callback:function(t){e.$set(e.form,"mobileCode",t)},expression:"form.mobileCode"}},[n("template",{slot:"append"},[n("get-code",{attrs:{isValidate:e.isValidateMobile,type:"mobile",identity:e.form.identity,mobile:e.form.mobile}})],1)],2)],1)],1),e._v(" "),n("btn-group",{staticClass:"mt_30",attrs:{activeNames:e.activeNames,isDisabled:e.isDisabled,index:"5"},on:{uodateUser:function(t){return e._updateUser(["mobile"],{mobile:e.form.mobile,mobileCode:e.form.mobileCode})},changeActive:function(t){e.activeNames="0"}}})],1)],2)],1)],1),e._v(" "),n("div",{staticClass:"bottom-container ft_24 c_6 ft_b mt_50 "},[e._v("\n    其他\n  ")]),e._v(" "),n("div",{staticClass:"cancel-group mt_30 ml_20 c_6 ft_18"},[n("el-button",{attrs:{type:"primary",disabled:e.isLinkHome}},[e._v("跳转首页")]),e._v(" "),n("el-button",{attrs:{type:"danger"}},[e._v("注销账户")])],1)],1)}),[],!1,null,"3bb013fb",null));t.default=y.exports}}]);